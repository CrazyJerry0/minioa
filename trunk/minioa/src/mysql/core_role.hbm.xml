<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
      "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="true" package="org.minioa.core">
    <class name="Role" table="core_role">
      <id name="ID_" column="ID_" type="java.lang.Integer">
      	<generator class="increment" />
      </id>
      <property name="CID_" column="CID_" type="java.lang.Integer"/>
			<property name="CDATE_" column="CDATE_" type="java.util.Date"/>
			<property name="MID_" column="MID_" type="java.lang.Integer"/>
			<property name="MDATE_" column="MDATE_" type="java.util.Date"/>
			<property name="roleName" column="roleName" type="java.lang.String"/>
			<property name="roleDesc" column="roleDesc" type="java.lang.String"/>
    </class>
    <sql-query name="core.role.select.records">
    <![CDATA[
        select ID_,CID_,CDATE_,MID_,MDATE_,
        	roleName,roleDesc
        from core_role
    ]]>
    </sql-query>
    <sql-query name="core.role.select.records.all">
    <![CDATA[
        select ID_,roleName
        from core_role order by roleName
    ]]>
    </sql-query>
    <sql-query name="core.role.select.records.count">
    <![CDATA[
        select count(*) as result from core_role
    ]]>
    </sql-query>
    <sql-query name="core.role.select.records.where.id">
    <![CDATA[
        select ID_,CID_,CDATE_,MID_,MDATE_,
        	roleName,roleDesc
        from core_role where ID_ = :id
    ]]>
    </sql-query>
    <sql-query name="core.role.update.record.where.id">
    <![CDATA[
        update core_role set MID_ = :mId, MDATE_ = :mDate, 
        	roleName = :roleName, roleDesc = :roleDesc
        where ID_ = :id
    ]]>
    </sql-query>
    <sql-query name="core.role.delete.record.where.id">
    <![CDATA[
        call core_delrole(:id)
    ]]>
    </sql-query>
		<sql-query name="core.role.getRoleId.where.roleName">
    <![CDATA[
        select ID_
        from core_role where roleName = :roleName limit 1
    ]]>
    </sql-query>
    <sql-query name="core.role.select.records.list">
    <![CDATA[
        select ID_, roleName
        from core_role
        order by roleName
    ]]>
    </sql-query>
    <sql-query name="core.role.users">
    <![CDATA[
    	SELECT u.userName FROM core_role_user_relation rr
			left join core_role role on role.ID_ = rr.roleId
			left join core_user u on u.ID_ = rr.userId
			where role.roleName = :roleName
			order by u.userName
    ]]>
    </sql-query>
</hibernate-mapping>